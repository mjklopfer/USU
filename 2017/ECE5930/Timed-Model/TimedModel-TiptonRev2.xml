<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
chan arrive; //car arriving at sensor
chan detectCar; //sensor detects the arrival of a car. sensor is disabled
chan enableSensor; //enable sensor
urgent chan go; //tell car to go
chan red;
chan yellow;
chan green;
clock c;

//chan reqCross;
//chan resetButton;
//chan prepCross;
int[0,2] major=0;
int[0,2] minor=2;
int[0,1] turn=0;</declaration><template><name x="5" y="5">TrafficLights</name><parameter>const int[1,2] me, int[0,2] &amp;status_self, int[0,2] &amp;status_other</parameter><declaration>// Place local declarations here.
clock c;</declaration><location id="id0" x="-480" y="-24"><name x="-490" y="-54">Green</name></location><location id="id1" x="-480" y="-272"><name x="-490" y="-302">Red</name></location><location id="id2" x="-480" y="-144"><name x="-490" y="-174">Yellow</name></location><location id="id3" x="-664" y="-144"><name x="-720" y="-152">Initial</name><committed/></location><init ref="id3"/><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="-336" y="-152">status_other==2</label><label kind="assignment" x="-368" y="-112">status_self:=0</label><nail x="-344" y="-144"/></transition><transition><source ref="id2"/><target ref="id1"/><label kind="assignment" x="-540" y="-208">status_self:=2</label></transition><transition><source ref="id0"/><target ref="id2"/><label kind="guard" x="-600" y="-120">status_other==2</label><label kind="assignment" x="-592" y="-104">status_self:=1</label><nail x="-480" y="-128"/></transition><transition><source ref="id3"/><target ref="id1"/><label kind="guard" x="-640" y="-224">me==1</label></transition><transition><source ref="id3"/><target ref="id0"/><label kind="guard" x="-632" y="-88">me==2</label></transition></template><template><name>Car</name><parameter>int[0,2] &amp;minor</parameter><location id="id4" x="48" y="-32"><name x="64" y="-40">Arrive</name></location><location id="id5" x="-136" y="-32"><name x="-192" y="-40">Away</name></location><init ref="id5"/><transition><source ref="id5"/><target ref="id5"/><nail x="-208" y="-88"/><nail x="-272" y="-16"/><nail x="-184" y="48"/></transition><transition><source ref="id4"/><target ref="id5"/><nail x="-48" y="-128"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-72" y="-32">arrive!</label></transition></template><template><name>Sensor</name><parameter>int[0,2] &amp;status_major</parameter><location id="id6" x="-160" y="-40"><name x="-170" y="-70">disabledSensor</name><label kind="invariant" x="-184" y="-96">c&lt;=36</label></location><location id="id7" x="-72" y="40"><name x="-56" y="40">Car_detected</name></location><location id="id8" x="-248" y="32"><name x="-312" y="24">no_car</name></location><init ref="id8"/><transition><source ref="id6"/><target ref="id8"/><label kind="guard" x="-264" y="-34">c==36</label></transition><transition><source ref="id7"/><target ref="id6"/><label kind="synchronisation" x="-112" y="-16">detectCar!</label></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-192" y="40">arrive?</label><nail x="-88" y="40"/></transition></template><template><name>MajorLight</name><parameter>int[0,2] &amp;major, int[0,2] &amp;minor, int[0,1] &amp;turn</parameter><declaration>clock c1;</declaration><location id="id9" x="-112" y="-152"><name x="-96" y="-168">Red</name><label kind="invariant" x="-144" y="-192">c&lt;=36</label></location><location id="id10" x="-112" y="-24"><name x="-96" y="-32">Yellow</name></location><location id="id11" x="-112" y="96"><name x="-136" y="112">Green</name></location><init ref="id11"/><transition><source ref="id9"/><target ref="id11"/><label kind="guard" x="88" y="-48">c==36</label><label kind="synchronisation" x="88" y="-32">yellow!</label><label kind="assignment" x="-172" y="-28">c:=0</label><nail x="80" y="-24"/></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-144" y="-104">red!</label><label kind="assignment" x="-172" y="-88">c:=0</label></transition><transition><source ref="id11"/><target ref="id10"/><label kind="guard" x="-172" y="6">c&gt;=30</label><label kind="synchronisation" x="-192" y="32">detectCar?</label></transition></template><template><name>MinorLight</name><parameter>int[0,2] &amp;minor, int[0,2] &amp;major, int[0,1] &amp;turn</parameter><declaration>clock c2;</declaration><location id="id12" x="-120" y="104"><name x="-184" y="96">Green</name><label kind="invariant" x="-130" y="119">c&lt;=30</label></location><location id="id13" x="-120" y="-24"><name x="-104" y="-32">Yellow</name><label kind="invariant" x="-184" y="-32">c&lt;=36</label></location><location id="id14" x="-120" y="-160"><name x="-130" y="-190">Red</name></location><init ref="id14"/><transition><source ref="id14"/><target ref="id12"/><label kind="synchronisation" x="56" y="-32">red?</label><nail x="56" y="-24"/></transition><transition><source ref="id13"/><target ref="id14"/><label kind="guard" x="-180" y="-122">c==36</label><label kind="synchronisation" x="-192" y="-96">yellow?</label></transition><transition><source ref="id12"/><target ref="id13"/><label kind="guard" x="-176" y="24">c==30</label></transition></template><system>// Place template instantiations here.

//Major=TrafficLights(2,major,minor);
//Minor=TrafficLights(1,minor,major);
sensor=Sensor(major);
car=Car(minor);
Major=MajorLight(major,minor,turn);
Minor=MinorLight(minor,major,turn);
// List one or more processes to be composed into a system.
system Major,Minor,sensor,car;</system></nta>